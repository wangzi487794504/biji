##### 字节码

* Java虚拟机：跨语言的平台：

  * Java虚拟机不和包括java在内的任何语言绑定，它只与class文件这种二进制文件格式所关联。无论使用何种语言进行软件开发，只要将源文件编译为正确的Class文件，那么这种语言就可以在Java虚拟机上执行，可以说，统一而强大的Class文件结构，就是Java虚拟机的基石、桥梁

     ![在这里插入图片描述](%E5%AD%97%E8%8A%82%E7%A0%81.assets/20201004103315879.png) 

* 前端编译器的主要任务就是负责将符合Java语言规范的Java代码转换为符合JVM规范的字节码文件

  * javac是一种能够将Java源码编译为字节码的前端编译器
  * javac编译器在将Java源码编译为一个有效的字节码文件过程中经历了4个步骤：**分别是词法解析、语法解析、语义解析以及生成字节码**

*  前端编译器 vs 后端编译器 

   ![img](%E5%AD%97%E8%8A%82%E7%A0%81.assets/20210125202110613.png) 

   ![在这里插入图片描述](%E5%AD%97%E8%8A%82%E7%A0%81.assets/20201004103842512.png) 

* 字节码指令

  * Java虚拟机的指令由一个字节长度的、代表着某种特定操作含义的操作码(opcode)以及跟随其后的零至多个代表此操作所需参数的操作数(operand)所构成。虚拟机中许多指令并不包含操作数，只有一个操作码

  * 比如:操作码(操作数)

     ![在这里插入图片描述](%E5%AD%97%E8%8A%82%E7%A0%81.assets/2021050121242727.png) 

    * 像astore_1这种是提前预留的

* class文件的结构并不是一成不变的，随着Java虚拟机的不断发展，总是不可避免地会对Class文件结构做出一些调整，但是其基本结构和框架是非常稳定的

*  Class 文件格式采用一种类似于 C语言结构体的方式进行数据存储，这种结构中只有两种数据类型：无符号数和表

  * 无符号数属于基本的数据类型，以 u1、u2、u4、u8 来分别代表 1 个字节、2 个字节、4 个字节和 8 个字节的无符号数，无符号数可以用来描述数字、索引引用、数量值或者按照 UTF-8 编码构成字符串值
  * 表是由多个无符号数或者其他表作为数据项构成的复合数据类型，所有表都习惯性地以“_info”结尾。表用于描述有层次关系的复合结构的数据，整个 Class 文件本质上就是一张表。 由于表没有固定长度，所以通常会在其前面加上个数说明
    