#### DDL语句

* 创建表

  * 语法格式

    ```txt
    create table 表名(
      字段名1 数据类型,
      字段名2 数据类型,
      字段名3 数据类型,
      ......
    );
    ```

    

* 插入数据

  * 语法格式

    ```sql
    insert into 表名(字段名1, 字段名2, 字段名3,......) values (值1,值2,值3,......);
    #value后面括号中的值是和字段一一对应的，且数据类型要一一对应
    ```

    * 字段名也可以省略，如果字段名省略就表示把所有字段名都写上去了，并且顺序和建表时的顺序相同。（**省略就是每个字段都要有对应的值并且字段顺序不鞥改变**）
    * 不指定默认值就为null，指定就是默认值

* 删除表

  * 语法格式

    ```sql
    drop table 表名;
    ```

    * 也可以价格判断，如果存在就删除，这样可以避免报错，在oracle不支持

      ```sql
      drop table if exists 表名;
      ```

      

* 数据类型

  * 数据类型（data_type）是指系统中所允许的数据的类型。数据库中的每个列都应该有适当的数据类型，用于限制或允许该列中存储的数据。例如，列中存储的为数字，则相应的数据类型应该为数值类型。

  * 如果使用错误的数据类型可能会严重影响应用程序的功能和性能，所以在设计表时，应该特别重视数据列所用的数据类型。更改包含数据的列不是一件小事，这样做可能会导致数据丢失。因此，在创建表时必须为每个列设置正确的数据类型和长度。

  * MySQL 的数据类型可以分为整数类型、浮点数类型、定点数类型、日期和时间类型、字符串类型、二进制类型等。

    * 整数类型

      * tinyint：1个字节（微小整数）
      * smallint：2个字节（小整数）
      * mediumint：3个字节（中等大小的整数）
      * **int（integer）：4个字节（普通大小整数）**
      * **bigint：8个字节（大整数）**

    * 浮点数类型

      * float：4个字节，单精度（最多5位小数）
      * **double：8个字节，双精度（最多16位小数）**

    * 定点数类型

      * decimal：定点数类型。==底层实际上采用字符串的形式存储数字。==
      * 语法：decimal(m, d)
        * 例如：decimal(3, 2) 表示3个有效数字，2个小数。==（有效数字最多65个，小数位最多30个）==

    * 日期和时间类型

      * year：1个字节，只存储年，格式YYYY
      * time：3个字节，只存储时间，格式HH:MM:SS / HHMMSS
      * date：3个字节，只存储年月日，格式：YYYY-MM-DD
      * **datetime：8个字节，存储年月日+时分秒，格式：YYYY-MM-DD HH:MM:SS（从公元1000年~公元9999年）**（用的最多）
      * timestamp：4个字节，存储年月日+时分秒，格式：YYYY-MM-DD HH:MM:SS（从公元1980年~公元2040年）或者格式为 YYYYMMDDHHMMSS（==采用这种格式不需要使用单引号，当然你使用单引号也可以==）

    * 字符串类型

      * ### char

        **char(m)：**m长度是0~255个字符。
        固定长度字符串，在定义时指定字符串列长。当保存时，在右侧填充空格以达到指定的长度。m表示列的长度，范围是 0～255 个字符。
        例如，CHAR(4) 定义了一个固定长度的字符串列，包含的字符个数最大为 4。当插入的字符长度大于4，则报错（除非超过4个长度之后都是空格字符，则空格字符会自动被删除用来保证插入的成功）。

      * varchar

        **varchar(m)：**m长度是0~16383个字符
        长度可变的字符串。varchar 的最大实际长度由最长的行的大小和使用的字符集确定，而实际占用的空间为字符串的实际长度加 1。
        例如，varchar(50) 定义了一个最大长度为 50 的字符串，如果插入的字符串只有 10 个字符，则实际存储的字符串为 10 个字符和一个字符串结束字符。varchar在值保存和检索时尾部的空格仍保留。

      * char的效率比varchar效率高，但它是定长，拿空间换时间，varchar会根据实际传过来的分配空间。==一般确定长度的用char，不能确定长度的用varchar==

        * 此外,varchar包含了一个结束字符在里面

          ![1708647300729-2181603b-e620-4be8-bab6-1b9c029989d8.png](DDL%E8%AF%AD%E5%8F%A5.assets/1708647300729-2181603b-e620-4be8-bab6-1b9c029989d8.png)

      * text

        * tinytext 表示长度为 255字符的 TEXT 列。
        * text 表示长度为 65535字符的 TEXT 列。
        * mediumtext 表示长度为 16777215字符的 TEXT 列。
        * longtext 表示长度为 4294967295 或 4GB 字符的 TEXT 列。

      * enum

        * 语法：<字段名> enum('值1','值2',...)
        * 该字段插入值时，只能是指定的枚举值。

        

      * set

        * 语法：<字段名> set('值1','值2','值3',...)   注意：值不可重复。
        * 该字段插入值时，只能是指定的值。

        

    * 二进制类型

      * BLOB：二进制大对象，可以存储图片、声音、视频等文件。

        - blob：小的，最大长度65535个字节
        - mediumblob：中等的，最大长度16777215个字节
        - longblob：大的，最大长度4GB的字节

      

* 举例

  * 先创建一张表

    ```sql
    create table t_student(
      no bigint,
      name varchar(255),
      age int comment '年龄'
    );
    #comment '年龄'是注释
    ```

  * 查看表的建表语句

    ```sql
    show create table 表名;
    ```

    ```sql
    #查看表建表语句
    show create table t_student;
    ```

  * 修改表名

    ```sql
    alter table 表名 rename 新表名;
    ```

  * 增加字段

    ```sql
    alter table 表名 add 字段名 数据类型;
    ```

  * 修改字段

    ```sql
    alter table 表名 change 旧字段名 新字段名 数据类型;
    ```

  * 修改字段的数据类型

    ```sql
    alter table 表名 modify column 字段名 数据类型;
    ```

  * 删除字段

    ```sql
    alter table 表名 drop 字段名;
    ```

  * 复制表

    ```sql
    create table 新表表名 as select * from 已有的表;
    例如：
    create table dept2 as select * from dept;
    ```

    

##### DML语句

* 当我们对表中的数据进行增删改的时候，称它为DML语句。（数据操纵语言），主要包括：insert、delete、update

* insert

  * 格式

    ```sql
    insert into 表名 values(值1,值2,值3,...);
    ```

    

  * insert可以一次插入多条语句

    ```sql
    insert into t_stu(no,name,age) values(1,'jack',20),(2,'lucy',30);
    ```

* delete

  * 语法格式

    ```sql
    # 将所有记录全部删除
    delete from 表名;
    
    # 删除符合条件的记录
    delete from 表名 where 条件;
    ```

  * 举例

    ```sql
    delete from t_user where name='lisi'
    ```

  * 以上的删除属于DML的方式删除，这种删除的数据是可以通过事务回滚的方式重新恢复的，但是删除的效率较低。（这种删除是支持事务的。）

  * 另外还有一种删除表中数据的方式，但是这种方式不支持事务，不可以回滚，删了之后数据是永远也找不回来了。这种删除叫做：表被截断。

    * 注意：这个语句删除效率非常高，巨大的表，瞬间干掉所有数据。但不可恢复。

      ```sql
      truncate table 表名;
      ```

    * truncate不是dml语句，他适合删大的表，删的快

* update

  * 语法格式

    ```sql
    update 表名 set 字段名1=值1, 字段名2=值2, 字段名3=值3 where 条件;
    ```

  * 如果没有更新条件(即where条件)的话，所有记录全部更新。