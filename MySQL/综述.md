#### 综述

* 为什么要使用数据库

  * 持久化(persistence):把数据保存到可掉电式存储设备中以供之后使用。大多数情况下，特别是企业级应用，数据持久化意味着将内存中的数据保存到硬盘上加以"固化”，而持久化的实现过程大多通过各种关系数据库来完成。
  * 持久化的主要作用是将内存中的数据存储在关系型数据库中，当然也可以存储在磁盘文件、XML数据文件中。

* 数据库相关概念

  <img src="%E7%BB%BC%E8%BF%B0.assets/1695132165058.png" alt="1695132165058" style="zoom: 80%;" />

* 数据库与管理系统的关系
  
  * 数据库管理系统(DBMS)可以管理多个数据库，一般开发人员会针对每一个应用创建一个数据库。为保存应用中实体的数据，一般会在数据库创建多个表。以保存程序中实体用户的数据。

<img src="%E7%BB%BC%E8%BF%B0.assets/1695132263039.png" alt="1695132263039" style="zoom: 80%;" />

* 常见数据库介绍
  * Oracle：1979年，Oracle2诞生，它是第一个商用的 RDBMS(关系型数据库管理系统)。随着Oracle软件的名气越来越大，公司也改名叫oracle 公司。
    2007年，总计85亿美金收购BEA Systems.
    2009年，总计74亿美金收购SUN。此前的2008年，SUN以10亿美金收购MySQL。意味着Oracle同时拥有了MySQL的管理权，至此oracle在数据库领域中成为绝对的领导者。
    2013年，甲骨文超越IBM，成为继Microsoft后全球第二大软件公司。
    如今Oracle的年收入达到了400亿美金，足以证明商用（收费）数据库软件的价值。
  * SQL Server: 是微软开发的大型商业数据库，诞生于1989年。C#、.net等语言常使用，与WinNT完全集成，也可以很好地与Microsoft BackOffice产品集成。
  * DB2：IBM公司的数据库产品,收费的。常应用在银行系统中。
  * PostgresQL：稳定性极强，最符合SQL标准，开放源码，具备商业级DBMS质量。PG对数据量大的文本以及SQL处理较快。
  * SyBase：已经淡出历史舞台。提供了一个非常专业数据建模的工具PowerDesigner.
  * SQLite：嵌入式的小型数据库，应用在手机端,零配置，SQLite不用安装，不用配置，不用启动，关闭或者配置数据库实例。当系统崩溃后不用做任何恢复操作，再下次使用数据库的时候自动恢复。
  * informix：IBM公司出品，取自information和Unis的结合，它是第一个被移植到Linux上的商业数据库产品。仅运行于unix/linux平台，命令行操作。性能较高，支持集群，适应于安全性要求极高的系统，尤其是银行，证券系统的应用。
  * MySQL：.MySQL是一个开放源代码的玉系型数据库管理系统，由瑞典MySQLAB(创始人Michal Widenius)公司1995年开发。迅速成为开源数据库的No.1。2008被Sun收购（10亿美金)，2009年Sun被Oracle收购。MariaDB应运而生。(MySQL的创造者担心MySQL有闭源的风险,因此创建了MySQL的分支项目MariaDB)
    - MySQL6x版本之后分为社区版和商业版。
    MySQL是一种关联数据库管理系统，将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。
    - MySQL是开源的，所以你不需要支付额外的费用
    - MySQL是可以定制的，采用了GPL(GNU General Public License)协议。你可以修改源码来开发自己的MySQL系统。
    - MySQL支持大型的数据库。可以处理拥有上千万条记录的大型数据库。
    - MySQL支持大型数据库，支持5000万条记录的数据仓库，32位系统表文件最大可支持4GB，64位系统支持最大的表文件为8TB.
    - MySQL使用标准的SQL数据语言形式。
    - MysSQL可以允许运行于多个系统上，并且支持多种语言。这些编程语言包括c、C++、Python、Java、Perl.PHP和Ruby等。
  
* 关系型数据库
  * 实质：这种类型的数据库是最古老的数据库类型，关系型数据库模型是把复杂的数据结构归结为简单的二元关系(即二维表格形式)。
  * 关系型数据库以行(row)和`列(column)'的形式存储数据，以便于用户理解。这一系列的行和列被称为表(table)，一组表组成了一个库(database)。
  * 表与表之间的数据记录有关系(relationship)。现实世界中的各种实体以及实体之间的各种联系均用关系模型来表示。关系型数据库，就是建立在关系模型基础上的数据库。
  
* 键值型数据库
  * 键值型数据库通过Key-Value键值的方式来存储数据，其中 Key和Value可以是简单的对象，也可以是复杂的对象。Key 作为唯一的标识符，优点是查找速度快，在这方面明显优于关系型数据库，缺点是无法像关系型数据库一样使用条件
  * 过滤（比如WHERE)，如果你不知道去哪里找数据，就要遍历所有的键，这就会消耗大量的计算。
  * 键值型数据库典型的使用场景是作为内存缓存。Redis 是最流行的键值型数据库。
  
* 搜索引擎数据库
  * 虽然关系型数据库采用了索引提升检索效率，但是针对全文索引效率却较低。搜索引擎数据库是应用在搜索引擎领域的数据存储形式，由于搜索引擎会爬取大量的数据，并以特定的格式进行存储，这样在检索的时候才能保证性能最优。核心原理是"倒排索引""。
  * 典型产品: Solr、Elasticsearch、Splunk 等。
  
* 列式数据库
  * 列式数据库是相对于行式存储的数据库，Oracle、MysQL.sQL Server等数据库都是采用的行式存储（Row-based)，而列式数据库是将数据按照列存储到数据库中，这样做的好处是可以大量降低系统的VO，适合于分布式文件系统。不足在于功能相对有限。
  * 典型产品:HBase等。
  
* ORM思想

  ![1695268043769](%E7%BB%BC%E8%BF%B0.assets/1695268043769.png)

* 表的关联关系

  * 表与表之间的数据记录有关系(relationship)。现实世界中的各种实体以及实体之间的各种联系均用关系模型来表示。
  * 四种:一对一关联、一对多关联、多对多关联、自我引用

* 一对一关联

  * 在实际的开发中应用不多，因为一对一可以创建成一张表。
  * 举例:设计学生表:学号、姓名、手机号码、班级、系别、身份证号码、家庭住址、籍贯、紧急联系人、...。拆为两个表:两个表的记录是——对应关系。
  * 基础信息表(常用信息):学号、姓名、手机号码、班级、系别
  * 档案信息表(不常用信息):学号、身份证号码、家庭住址、籍贯、紧急联系人、...
  * 为什么分开呢，这也是一种优化，不常用到的单独放到一张表

* 一对多关系

  * 常见实例场景:客户表和订单表，分类表和商品表，部门表和员工表。
  * 举例:员工表:编号、姓名、....、所属部门。部门表:编号、名称、简介

* 多对多

  * 要表示多对多关系，必须创建第三个表，该表通常称为联接表，它将多对多关系划分为两个一对多关系。将这两个表的主键都插入到第三个表中。

* 自我引用

  * 员工里有组长，员工引用自己表格里的组长

    ![1695270682210](%E7%BB%BC%E8%BF%B0.assets/1695270682210.png)

* 注册表

  ![1695275763675](%E7%BB%BC%E8%BF%B0.assets/1695275763675.png)

* ![1695277753176](%E7%BB%BC%E8%BF%B0.assets/1695277753176.png)
  * 通过-P指定不同的端口号就可以执行不同的版本
  * 不指定端口号就是谁在环境变量path列表里靠前就使用哪个版本
  * 

* 5.7默认数据编码格式为拉丁

  <img src="%E7%BB%BC%E8%BF%B0.assets/1695291351070.png" alt="1695291351070" style="zoom:50%;" />
  * 修改pro

    <img src="%E7%BB%BC%E8%BF%B0.assets/1695289892993.png" alt="1695289892993" style="zoom:50%;" />![1695290167288](%E7%BB%BC%E8%BF%B0.assets/1695290167288.png)

    ![1695290167288](%E7%BB%BC%E8%BF%B0.assets/1695290167288.png)

  * 再重启下服务

  * 8.0不需要设置，它默认使用utf8

    ![1695300476546](%E7%BB%BC%E8%BF%B0.assets/1695300476546.png)

* MySQL的开发语言c++

* ROOT账户默认不能远程连接

* 注意：所有命令都需要用分号结尾（登录除外

   命令不区分大小写(也可以大小写混用)

   不见分号不执行

   \c 指令用来终止

   ctrl+c 退出MYSQL



##### mysql常用命令

* 登录mysql

  ```java
  mysql -u root -p 回车
  输入密码
  ```

* 退出mysql

  ```txt
  exit
  或者
  quit
  ```

* 关闭mysql服务

  ```txt
  net stop mysql
  ```

* 查看数据库

  ```txt
  show databases;
  ```

* 使用某个数据库

  ```txt
  use [数据库名称];
  ```

* 新建数据库

  ```txt
  create database [数据库名称];
  //然后查看数据库
  show databases;
  ```

* 查看数据库表和当前使用的数据库

  ```txt
  show tables;
  select database();
  ```

* 查看数据库版本号

  ```txt
  select version()
  ```

  

* 查看表结构

  ```xm
  desc 表名
  ```

  